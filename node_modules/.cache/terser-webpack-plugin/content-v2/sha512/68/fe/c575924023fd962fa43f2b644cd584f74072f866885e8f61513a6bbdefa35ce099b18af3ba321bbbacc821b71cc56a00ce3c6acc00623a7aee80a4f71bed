{"code":"!function(e){function t(t){for(var r,o,a=t[0],l=t[1],c=t[2],u=0,p=[];u<a.length;u++)o=a[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(d&&d(t);p.length;)p.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],r=!0,a=1;a<i.length;a++){var l=i[a];0!==s[l]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=i[0]))}return e}var r={},s={0:0},n=[];function o(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=r,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)o.d(i,r,function(t){return e[t]}.bind(null,r));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=l;n.push([13,1]),i()}([function(e,t,i){\"use strict\";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0}),t.MenuButton=void 0;var n=i(3),o=function(e){function t(t,i,r,s,n,o,a,l,c){void 0===l&&(l=18),void 0===c&&(c=!0);var d=e.call(this,t,i,r)||this;t.add.existing(d),d.setOrigin(0,0);var u=c?10:0;d.label=t.add.text(i+10,r+u,s).setFontSize(l).setAlign(\"center\").setDepth(2),d.label.scrollFactorX=0,d.label.scrollFactorY=0,d.scrollFactorX=0,d.scrollFactorY=0,d.pressed=!1;var p=(o||d.label.width)+2*u,f=(a||d.label.height)+2*u;return d.width=p>=10?p:10,d.width=o||p>=10?p:10,d.height=a||f>=50?f:50,d.setInteractive({useHandCursor:!0}).on(\"pointerover\",d.enterMenuButtonHoverState).on(\"pointerout\",d.enterMenuButtonRestState).on(\"pointerdown\",d.enterMenuButtonActiveState),n&&d.on(\"pointerup\",n),d.enterMenuButtonRestState(),d}return s(t,e),t.prototype.enterMenuButtonHoverState=function(){this.pressed||(this.label.setColor(\"#000000\"),this.setFillStyle(8947848))},t.prototype.enterMenuButtonRestState=function(){this.pressed||(this.label.setColor(\"#FFFFFF\"),this.setFillStyle(8947848))},t.prototype.enterMenuButtonActiveState=function(){this.pressed=!0,this.label.setColor(\"#BBBBBB\"),this.setFillStyle(4473924)},t}(n.GameObjects.Rectangle);t.MenuButton=o},,,,function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.updateDyanmic=t.updateStatic=t.initDynamicAndStaticQueues=t.compoundBlocks=t.igniteCrate=t.igniteNeighbors=t.igniteCompound=t.clearTiles=t.getTileCenter=t.getDiffFromTileCenter=t.getTile=t.getGameHeight=t.getGameWidth=void 0;var r=i(5),s=i(43);t.getGameWidth=function(e){return e.game.scale.width};function n(e,t){return[Math.floor(e/50),Math.floor(t/50)]}function o(e,t){var i=n(e,t),r=i[0],s=i[1];return[Math.abs(50*r+25-e),Math.abs(50*s+25-t)]}function a(e,t){var i=n(e,t);return[50*i[0]+25,50*i[1]+25]}function l(e,t,i,r){for(var s=[[t-1,i],[t+1,i],[t,i+1],[t,i-1]],o=0;o<s.length;o++){var a=s[o][0],c=s[o][1];a>=0&&a<e.xTiles&&c>=0&&c<e.yTiles&&e.tiles[a][c]&&e.tiles[a][c].forEach((function(t){e.burnQueue.add(t.owner)}))}r.isLava&&e.time.delayedCall(1e3,(function(){var t=n(r.sprite.x,r.sprite.y),i=t[0],s=t[1];l(e,i,s,r)}))}function c(e,t){t.onFire||(t.onFire=!0,t.fireSprite=e.add.sprite(t.sprite.x,t.sprite.y-10,\"squareFire\"),t.fireSprite.anims.play(\"squareFire\",!1),t.fireSprite.alpha=.7,e.time.delayedCall(1e3,(function(){if(t.fireSprite.active&&!t.isLava&&(t.fireSprite.alpha=0),!t.isLava){var i=e.add.sprite(t.sprite.x,t.sprite.y-10,\"fireDisappear\");i.anims.play(\"fireDisappear\",!1,!0),i.once(\"animationcomplete\",(function(){i.alpha=0}))}var r=n(t.sprite.x,t.sprite.y),s=r[0],o=r[1];l(e,s,o,t)})))}t.getGameHeight=function(e){return e.game.scale.height},t.getTile=n,t.getDiffFromTileCenter=o,t.getTileCenter=a,t.clearTiles=function(e){for(var t=0;t<e.tiles.length;t++)for(var i=0;i<e.tiles[0].length;i++)e.tiles[t][i].clear()},t.igniteCompound=function(e,t){t.onFire||(t.onFire=!0,t.blocks.forEach((function(t){c(e,t)})),e.time.delayedCall(1e3,(function(){t.blocks.forEach((function(t){t.destroy(e)}))})))},t.igniteNeighbors=l,t.igniteCrate=c,t.compoundBlocks=function(e,t){var i=new Set;t.forEach((function(t){var n=t.x+\",\"+t.y;if(!i.has(n)){for(var o=[n],a=[],l=new Set;0!=o.length;)o.forEach((function(t){var s=r.indexes[parseInt(e.blocks[t].sprite.frame.name)].split(\"\");i.add(t),l.add(e.blocks[t]);var n=e.blocks[t].sprite.x,o=e.blocks[t].sprite.y,c=n+\",\"+(o-50),d=n+50+\",\"+o,u=n+\",\"+(o+50),p=n-50+\",\"+o;function f(e,t){a.push(e),i.add(e),l.add(t.blocks[e])}1!=s[1]||i.has(c)||f(c,e),1!=s[3]||i.has(d)||f(d,e),1!=s[5]||i.has(u)||f(u,e),1!=s[7]||i.has(p)||f(p,e)})),o=a,a=[];new s.default(e,l)}}))},t.initDynamicAndStaticQueues=function(e){e.dynamicBlockQueue.clear();for(var t=0,i=Object.entries(e.blocks);t<i.length;t++){var r=i[t],s=r[0],n=r[1];n.sprite.isStatic()||(e.dynamicBlockQueue.add(n),delete e.blocks[s])}},t.updateStatic=function(e){new Set;var t={},i=new Set;e.dynamicBlockQueue.forEach((function(r){var s=o(r.sprite.x,r.sprite.y),n=(s[0],s[1]),l=a(r.sprite.x,r.sprite.y),c=l[0],d=l[1],u=c+\",\"+(d+50);console.log(e.blocks),r.sprite.active&&(r.sprite.body.velocity.y>3&&(r.sprite.body.velocity.y=3),n<5&&e.blocks[u]&&e.blocks[u].sprite.isStatic()?(r.owner.setAllGrounded(),t[c+\",\"+d]=r):r.sprite.isStatic()?r.sprite.isStatic()&&(t[c+\",\"+d]=r):i.add(r))}));for(var r=0,s=Object.entries(t);r<s.length;r++){var n=s[r],l=n[0],c=n[1];e.blocks[l]=c}e.dynamicBlockQueue=i},t.updateDyanmic=function(e){}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.indexes=t.tiles=void 0,t.tiles={\"00000000\":0,\"00010000\":1,\"00010001\":2,\"00000001\":3,\"00010100\":4,\"00000101\":5,\"01010100\":6,\"00010101\":7,\"01110101\":8,\"01011101\":9,11010111:10,11110101:11,\"00000100\":12,\"00011100\":13,\"00011111\":14,\"00000111\":15,\"01010000\":16,\"01000001\":17,\"01010001\":18,\"01000101\":19,11010101:20,\"01010111\":21,\"01011111\":22,\"01111101\":23,\"01000100\":24,\"01111100\":25,11111111:26,11000111:27,\"01011100\":28,\"00010111\":29,\"01110100\":30,\"00011101\":31,11110111:32,11111101:33,\"01110111\":34,11011101:35,\"01000000\":36,\"01110000\":37,11110001:38,11000001:39,\"01110001\":40,11000101:41,11010001:42,\"01000111\":43,11011111:44,\"01111111\":45,\"01010101\":46};for(var r={},s=0,n=Object.entries(t.tiles);s<n.length;s++){var o=n[s],a=o[0];r[o[1]]=a}t.indexes=r},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=i(4),s=function(){function e(){}return e.prototype.setGrounded=function(){if(this.sprite.active){this.sprite.setStatic(!0);var e=r.getTileCenter(this.sprite.x,this.sprite.y),t=e[0],i=e[1];this.sprite.setPosition(t,i)}},e}();t.default=s},,,function(e,t,i){var r={\"./log\":10};function s(e){var t=n(e);return i(t)}function n(e){if(!i.o(r,e)){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=n,e.exports=s,s.id=9},,function(e,t,i){\"use strict\";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(e){function t(t,i,r,s,n,o){void 0===n&&(n=0);var a=e.call(this)||this,l=s.matter.bodies.rectangle(t,i,50,50,{label:\"crate\"+r,inertia:1/0}),c=o?\"lava\":\"crate\",d=s.matter.add.sprite(t,i,c,n);return d.setExistingBody(l),d.setCollisionCategory(256),d.setBounce(0),d.setFriction(1),d.setFrictionStatic(100),a.sprite=d,a.onFire=!1,a.fireSprite=null,a.connectors=new Set,a.isLava=o,a}return s(t,e),t.prototype.syncFire=function(){this.sprite.active&&(this.fireSprite.x=this.sprite.x,this.fireSprite.y=this.sprite.y-10)},t.prototype.destroy=function(e){!this.isLava&&this.sprite.active&&(this.sprite.destroy(),this.connectors.forEach((function(t){t.destroy(e)})))},t}(i(6).default);t.default=n},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t,i){var r=i.matter.bodies.circle(e,t,20,{isSensor:!0,label:\"exit\",ignoreGravity:!0});this.sprite=i.matter.add.sprite(e,t,\"exit\",null,{isSensor:!0,label:\"exit\",ignoreGravity:!0}),this.sprite.setExistingBody(r),this.sprite.setDepth(-1),this.sprite.setCollisionCategory(256)}return e.prototype.getX=function(){return this.sprite.body.position.x},e.prototype.getY=function(){return this.sprite.body.position.y},e}();t.default=r},function(e,t,i){i(7),e.exports=i(39)},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.game=void 0;var r=i(3),s=i(40),n={title:\"Pyrokid\",type:r.AUTO,scale:{width:800,height:600},scene:s.default,physics:{default:\"matter\",matter:{enableSleeping:!1,debug:!1}},parent:\"game\",backgroundColor:\"#000000\"};t.game=new r.Game(n),window.addEventListener(\"resize\",(function(){t.game.scale.refresh()}))},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=i(41),s=i(42),n=i(44),o=i(54),a=i(59);t.default=[s.BootScene,r.MainMenuScene,n.GameScene,o.LevelEditor,a.LevelSelect]},function(e,t,i){\"use strict\";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0}),t.MainMenuScene=void 0;var n=i(0),o={active:!1,visible:!1,key:\"MainMenu\"},a=function(e){function t(){return e.call(this,o)||this}return s(t,e),t.prototype.preload=function(){this.load.json(\"leveleditorlevel\",\"assets/levels/leveleditor.json\")},t.prototype.create=function(){var e=this;this.add.tileSprite(400,300,800,600,\"backgroundDirt\");this.add.text(100,50,\"Pyrokid\",{color:\"#FFFFFF\"}).setFontSize(48),localStorage.setItem(\"useleveleditor\",\"false\"),this.anims.create({key:\"shootRight\",frames:this.anims.generateFrameNumbers(\"shoot\",{start:6,end:9}),frameRate:5,repeat:-1}),this.anims.create({key:\"screenfireball\",frames:this.anims.generateFrameNumbers(\"screenfireball\",{start:3,end:5}),frameRate:10,repeat:-1});var t=this.add.sprite(400,250,\"shoot\");t.scaleX=3,t.scaleY=3,t.anims.play(\"shootRight\");var i=this.add.sprite(600,250,\"screenfireball\");i.scaleX=3,i.scaleY=3,i.anims.play(\"screenfireball\"),new n.MenuButton(this,100,150,\"Level Select\",(function(){localStorage.setItem(\"useleveleditor\",\"false\"),e.scene.start(\"LevelSelect\")})),new n.MenuButton(this,100,250,\"Level Editor\",(function(){localStorage.setItem(\"upload\",\"false\"),e.scene.start(\"LevelEditor\")})),new n.MenuButton(this,100,350,\"Help\",(function(){return console.log(\"help button clicked\")}))},t}(Phaser.Scene);t.MainMenuScene=a},function(e,t,i){\"use strict\";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0}),t.BootScene=void 0;var n=i(4),o={active:!1,visible:!1,key:\"Boot\"},a=function(e){function t(){return e.call(this,o)||this}return s(t,e),t.prototype.preload=function(){var e=this,t=.5*n.getGameWidth(this),i=.5*n.getGameHeight(this),r=this.add.rectangle(t,i,400,100,0),s=this.add.rectangle(t+20-.5*r.width,i,10,80,8947848),o=this.add.text(t-75,i-100,\"Loading...\").setFontSize(24),a=this.add.text(t-25,i,\"0%\").setFontSize(24),l=this.add.text(t-25,i+100,\"\").setFontSize(24);this.load.on(\"progress\",(function(e){s.width=370*e;var t=100*e;a.setText(t+\"%\")})),this.load.on(\"fileprogress\",(function(e){l.setText(e.key)})),this.load.on(\"complete\",(function(){o.destroy(),a.destroy(),l.destroy(),s.destroy(),r.destroy(),e.scene.start(\"MainMenu\")})),this.loadAssets()},t.prototype.loadAssets=function(){this.load.image(\"background\",\"assets/backgrounds/TutorialBackground1.png\"),this.load.image(\"house\",\"assets/squares/house.png\"),this.load.image(\"bomb\",\"assets/bomb.png\"),this.load.image(\"backgroundDirt\",\"assets/backgrounds/level-editor.png\"),this.load.spritesheet(\"crate\",\"assets/clumpables/crateTiles.png\",{frameWidth:50,frameHeight:50}),this.load.spritesheet(\"dirt\",\"assets/clumpables/dirtTiles.png\",{frameWidth:50,frameHeight:50}),this.load.spritesheet(\"steel\",\"assets/clumpables/steelTiles.png\",{frameWidth:50,frameHeight:50}),this.load.spritesheet(\"lava\",\"assets/clumpables/lavaTiles.png\",{frameWidth:50,frameHeight:50}),this.load.spritesheet(\"fireball\",\"assets/fireball.png\",{frameWidth:38,frameHeight:19}),this.load.spritesheet(\"screenfireball\",\"assets/player/fireball.png\",{frameWidth:59,frameHeight:59}),this.load.spritesheet(\"player\",\"assets/player/player.png\",{frameWidth:60,frameHeight:60}),this.load.spritesheet(\"shoot\",\"assets/player/shoot.png\",{frameWidth:59,frameHeight:59}),this.load.spritesheet(\"jump\",\"assets/player/jump.png\",{frameWidth:59,frameHeight:59}),this.load.spritesheet(\"lizard\",\"assets/monsters/lizard.png\",{frameWidth:70,frameHeight:50}),this.load.spritesheet(\"spider\",\"assets/monsters/spider.png\",{frameWidth:77,frameHeight:61}),this.load.spritesheet(\"spiderArmored\",\"assets/monsters/spiderArmored.png\",{frameWidth:77,frameHeight:61}),this.load.spritesheet(\"squareFire\",\"assets/squares/squareFire.png\",{frameWidth:79,frameHeight:80}),this.load.spritesheet(\"fireDisappear\",\"assets/squares/fireDisappear.png\",{frameWidth:84,frameHeight:133}),this.load.spritesheet(\"explosion\",\"assets/explosion.png\",{frameWidth:150,frameHeight:150}),this.load.image(\"exit\",\"assets/exit.png\"),this.load.image(\"connector\",\"assets/connector.png\")},t}(Phaser.Scene);t.BootScene=a},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){var i=this;this.blocks=t;var r=[];t.forEach((function(e){e.owner=i,r.push(e.sprite.body)})),this.onFire=!1}return e.prototype.setAllGrounded=function(){this.blocks.forEach((function(e){e.setGrounded()}))},e.prototype.setAboveDynamic=function(e){this.blocks.forEach((function(e){e.setGrounded()}))},e}();t.default=r},function(e,t,i){\"use strict\";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0}),t.GameScene=void 0;var n,o,a=i(45),l=i(11),c=i(46),d=i(47),u=i(48),p=i(49),f=i(0),h=i(12),y=i(50),g=i(52),m=i(53),v=i(4),b={active:!1,visible:!1,key:\"Game\"},S=function(e){function t(){var t=e.call(this,b)||this;return t.speed=200,t.lizards={},t.spiders={},t.lavas={},t.crates={},t.bombs={},t.fireActive=!1,t.fireCooldown=!1,t.tiles=[],t.blocks={},t.TILE_SIZE=50,t.xTiles=0,t.yTiles=0,t.burnQueue=new Set,t.destroyQueue=new Set,t.dynamicBlockQueue=new Set,t.level=\"level\"+localStorage.getItem(\"level\"),t}return s(t,e),t.prototype.preload=function(){this.load.json(\"level\"+localStorage.getItem(\"level\"),\"assets/levels/\"+localStorage.getItem(\"level\")+\".json\")},t.prototype.create=function(){var e=this;this.burnQueue.clear(),this.destroyQueue.clear(),y.initAnims(this);var t=\"true\"==localStorage.getItem(\"useleveleditor\")?JSON.parse(localStorage.getItem(\"leveleditorlevel\")):this.cache.json.get(\"level\"+localStorage.getItem(\"level\")),i=t.width*this.TILE_SIZE,r=t.height*this.TILE_SIZE;this.add.tileSprite(i/2,r/2,i,r,\"backgroundDirt\").setDepth(-10),this.matter.world.setBounds(0,0,i,r,32,!0,!0,!1,!0),this.cameras.main.setBounds(0,0,i,r).setName(\"main\"),this.xTiles=t.height,this.yTiles=t.width,this.fire=null,this.fireActive=!1,this.fireCooldown=!1;for(var s=0;s<this.yTiles;s++){for(var b=[],S=0;S<this.xTiles;S++)b.push(new Set);this.tiles.push(b)}console.log(this.tiles),this.player=new a.default(t.player[0].x,t.player[0].y,this),this.cameras.main.startFollow(this.player.sprite,!1,.2,.2),this.cameras.main.fadeIn(100,0,0,0),this.lizards={};for(s=0;s<t.lizard.length;s++){var w=t.lizard[s];this.lizards[\"lizard\"+s]=new c.default(w.x,w.y,this,s)}this.spiders={};var x=0;t.spider.forEach((function(t){e.spiders[\"spider\"+x]=new d.default(t.x,t.y,e,x,!1),x+=1})),t.spiderArmored.forEach((function(t){e.spiders[\"spider\"+x]=new d.default(t.x,t.y,e,x,!0),x+=1})),this.blocks={},t.steel.forEach((function(t){e.blocks[t.x+\",\"+t.y]=new p.default(t.x,t.y,e,t.frame)})),t.dirt.forEach((function(t){e.blocks[t.x+\",\"+t.y]=new u.default(t.x,t.y,e,t.frame)})),this.bombs={};for(s=0;s<t.bomb.length;s++){w=t.bomb[s];this.bombs[\"bomb\"+s]=new m.default(w.x,w.y,s,this),this.blocks[w.x+\",\"+w.y]=this.bombs[\"bomb\"+s]}var _=new Set,O=0;this.crates={},t.crate.forEach((function(t){e.blocks[t.x+\",\"+t.y]=new l.default(t.x,t.y,O,e,t.frame,!1),_.add(e.blocks[t.x+\",\"+t.y]),e.crates[\"crate\"+O]=e.blocks[t.x+\",\"+t.y],O+=1})),t.lava.forEach((function(t){e.blocks[t.x+\",\"+t.y]=new l.default(t.x,t.y,O,e,t.frame,!0),_.add(e.blocks[t.x+\",\"+t.y]),e.crates[\"crate\"+O]=e.blocks[t.x+\",\"+t.y],O+=1})),t.exit.forEach((function(t){new h.default(t.x,t.y,e)}));var k=t.crate.concat(t.lava);v.compoundBlocks(this,k);var E=t.steel;v.compoundBlocks(this,E),t.steel.forEach((function(t){console.log(e.blocks[t.x+\",\"+t.y])})),y.jointBlocks(this,this.blocks,t),g.createCollisions(this),y.connectorBlocks(this,this.blocks,t),v.initDynamicAndStaticQueues(this),v.updateStatic(this),n=this.input.keyboard.createCursorKeys(),o=this.input.keyboard.addKeys(\"W,S,A,D,R\"),new f.MenuButton(this,10,10,\"Back to Menu\",(function(){e.scene.start(\"MainMenu\")}))},t.prototype.update=function(){var e=this;o.R.isDown&&this.scene.restart(),this.player.getY()>this.yTiles*this.TILE_SIZE&&this.scene.restart(),v.clearTiles(this),Object.keys(this.crates).forEach((function(t){var i=e.crates[t];if(i.sprite.active){var r=v.getTile(i.sprite.x,i.sprite.y);e.tiles[r[0]][r[1]].add(i)}}));for(var t=0,i=Object.entries(this.lizards);t<i.length;t++){var r=i[t];r[0];r[1].update()}for(var s=0,a=Object.entries(this.spiders);s<a.length;s++){var l=a[s];l[0];l[1].update()}if(o.A.isDown?this.player.moveLeft():o.D.isDown?this.player.moveRight():this.player.turn(),o.W.isDown&&this.player.touchingGround&&this.player.jump(),v.updateStatic(this),this.burnQueue.forEach((function(t){v.igniteCompound(e,t),e.burnQueue.delete(t)})),this.destroyQueue.forEach((function(t){t.destroy(e),e.destroyQueue.delete(t)})),(n.right.isDown||n.down.isDown||n.up.isDown||n.left.isDown)&&!this.fireActive&&!this.fireCooldown){this.fireCooldown=!0,this.fire=this.matter.add.sprite(this.player.getX(),this.player.getY(),\"fireball\",null,{isSensor:!0,label:\"fire\"});var c=\"right\";this.fire.setCollisionCategory(256),n.left.isDown&&(this.fire.setRotation(Math.PI),c=\"left\"),n.down.isDown&&(this.fire.setRotation(Math.PI/2),c=\"none\"),n.up.isDown&&(this.fire.setRotation(3*Math.PI/2),c=\"none\"),this.player.shoot(c),this.fire.anims.play(\"fireball\",!0),this.fire.setIgnoreGravity(!0);var d=n.right.isDown?1:-1,u=n.right.isDown||n.left.isDown?10:0;this.fire.setVelocityX(u*d);var p=n.down.isDown?1:-1,f=n.down.isDown||n.up.isDown?10:0;this.fire.setVelocityY(f*p),this.fireActive=!0,setTimeout((function(){e.fireActive&&(e.fireActive=!1,e.fire.destroy()),e.fireCooldown=!1}),500)}Object.keys(this.crates).forEach((function(t){var i=e.crates[t];null!=i.fireSprite&&i.syncFire()}))},t}(Phaser.Scene);t.GameScene=S},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t,i){var r=i.matter.bodies.rectangle(0,21,10,1,{isSensor:!0,label:\"groundSensor\"}),s=i.matter.bodies.rectangle(16,0,15,27,{isSensor:!0,label:\"playerRight\"}),n=i.matter.bodies.rectangle(-16,0,15,27,{isSensor:!0,label:\"playerLeft\"}),o=i.matter.bodies.rectangle(0,-15,10,5,{isSensor:!0,label:\"playerTop\"}),a=i.matter.bodies.rectangle(0,0,20,30,{label:\"player\"}),l=i.matter.body.create({parts:[a,r,s,n,o],inertia:1/0,label:\"player\",render:{sprite:{xOffset:.5,yOffset:.6}}}),c=i.matter.add.sprite(0,0,\"player\",{label:\"player\"});c.setExistingBody(l),c.setFriction(0),c.body.render.sprite.xOffset=0,c.body.render.sprite.yOffset=0,c.setPosition(e,t),c.setCollisionCategory(4096),c.setCollidesWith(4352),c.label=\"player\",this.sprite=c,this.hittingLeft=!1,this.hittingRight=!1}return e.prototype.moveLeft=function(){this.hittingLeft?this.sprite.setVelocityX(0):this.sprite.setVelocityX(-3),this.sprite.anims.play(\"left\",!0)},e.prototype.moveRight=function(){this.hittingRight?this.sprite.setVelocityX(0):this.sprite.setVelocityX(3),this.sprite.anims.play(\"right\",!0)},e.prototype.turn=function(){this.sprite.setVelocityX(0);var e=this.sprite.anims.getName().toLowerCase();e.includes(\"jump\")||(e.includes(\"left\")?this.sprite.anims.play(\"turnLeft\"):this.sprite.anims.play(\"turnRight\"))},e.prototype.shoot=function(e){var t=this.sprite.anims.getName().toLowerCase();\"left\"==e?this.sprite.anims.play(\"shootLeft\"):\"right\"==e?this.sprite.anims.play(\"shootRight\"):t.includes(\"left\")?this.sprite.anims.play(\"shootLeft\"):this.sprite.anims.play(\"shootRight\")},e.prototype.jump=function(){this.sprite.setVelocityY(-9),this.touchingGround=!1},e.prototype.getX=function(){return this.sprite.body.position.x},e.prototype.getY=function(){return this.sprite.body.position.y},e}();t.default=r},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t,i,r){var s=i.matter.bodies.rectangle(15,0,10,10,{isSensor:!0,label:\"lizard\"+r}),n=i.matter.bodies.rectangle(17,25,3,10,{isSensor:!0,label:\"rightEdgeL,\"+r}),o=i.matter.bodies.rectangle(-15,0,10,10,{isSensor:!0,label:\"lizard\"+r}),a=i.matter.bodies.rectangle(-17,25,3,10,{isSensor:!0,label:\"leftEdgeL,\"+r}),l=i.matter.bodies.rectangle(0,-20,30,2,{isSensor:!0,label:\"lizTop,\"+r}),c=i.matter.bodies.rectangle(0,0,35,40,{label:\"lizard\"+r});this.collisionSensor=i.matter.add.sprite(0,0,\"lizard\",null,{isSensor:!0,label:\"lizard\"+r,ignoreGravity:!0}),this.collisionSensor.alpha=0;var d=i.matter.body.create({parts:[c,s,a,n,o,l],inertia:1/0,render:{sprite:{xOffset:.5,yOffset:.5}}});this.velocity=1.5;var u=i.matter.add.sprite(0,0,\"lizard\");u.scaleX=.7,u.setExistingBody(d),u.setPosition(e,t),u.setCollisionCategory(1),u.setCollidesWith(256),this.collisionSensor.setCollisionCategory(4096),this.collisionSensor.setCollidesWith(1052672),this.collisionSensor.scaleX=.7,this.sprite=u,this.onFire=!1,this.fireSprite=null,this.sprite.anims.play(\"lizard\",!0),this.rightEdge=!1,this.leftEdge=!1}return e.prototype.flip=function(){this.sprite.flipX=!this.sprite.flipX,this.velocity=-1*this.velocity},e.prototype.ignite=function(e){this.onFire||(this.onFire=!0,this.fireSprite=e.add.sprite(this.sprite.x,this.sprite.y,\"squareFire\"),this.fireSprite.play(\"squareFire\",!1),this.fireSprite.alpha=.7)},e.prototype.syncFire=function(){this.onFire&&(this.fireSprite.x=this.sprite.x,this.fireSprite.y=this.sprite.y-10)},e.prototype.syncSensor=function(){this.sprite.active&&this.collisionSensor.setPosition(this.sprite.x,this.sprite.y)},e.prototype.destroy=function(){this.sprite.destroy(),this.collisionSensor.destroy()},e.prototype.update=function(){this.sprite.active&&(this.sprite.setVelocityX(this.velocity),this.syncSensor(),this.syncFire())},e}();t.default=r},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t,i,r,s){var n=i.matter.bodies.rectangle(20,0,10,10,{isSensor:!0,label:\"spider\"+r}),o=i.matter.bodies.rectangle(-20,0,10,10,{isSensor:!0,label:\"spider\"+r}),a=i.matter.bodies.rectangle(17,25,3,10,{isSensor:!0,label:\"rightEdgeS,\"+r}),l=i.matter.bodies.rectangle(-17,25,3,10,{isSensor:!0,label:\"leftEdgeS,\"+r}),c=i.matter.bodies.rectangle(0,-22,30,2,{isSensor:!0,label:\"spiTop,\"+r});this.collisionSensor=i.matter.add.sprite(0,0,\"spider\",null,{isSensor:!0,label:\"spider\"+r,ignoreGravity:!0}),this.collisionSensor.setCollisionCategory(4096),this.collisionSensor.setCollidesWith(4096),this.collisionSensor.alpha=0;var d=i.matter.bodies.rectangle(0,0,35,40,{label:\"spider\"+r}),u=i.matter.body.create({parts:[d,n,a,l,o,c],inertia:1/0,render:{sprite:{xOffset:.5,yOffset:.5}}});this.velocity=1.5;var p=i.matter.add.sprite(0,0,\"spider\");p.scaleX=.7,p.scaleY=.9,p.setCollisionCategory(1),p.setExistingBody(u),p.setPosition(e,t),p.setCollidesWith(256),this.collisionSensor.scaleX=.7,this.collisionSensor.scaleY=.8,this.sprite=p,this.rightEdge=!1,this.rightEdge=!0,s?(this.sprite.anims.play(\"spiderArmored\",!0),this.armored=!0):this.sprite.anims.play(\"spider\",!0)}return e.prototype.flip=function(){this.sprite.flipX=!this.sprite.flipX,this.velocity=-1*this.velocity},e.prototype.hitFire=function(){if(this.armored){this.armored=!1;var e=this.sprite.anims.currentFrame.index;this.sprite.anims.play({key:\"spider\",startFrame:e-1})}else this.destroy()},e.prototype.syncSensor=function(){this.sprite.active&&(this.collisionSensor.x=this.sprite.x,this.collisionSensor.y=this.sprite.y)},e.prototype.destroy=function(){this.armored=!1,this.sprite.destroy(),this.collisionSensor.destroy()},e.prototype.update=function(){this.sprite.active&&(this.sprite.setVelocityX(this.velocity),this.syncSensor())},e}();t.default=r},function(e,t,i){\"use strict\";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(e){function t(t,i,r,s){var n=e.call(this)||this,o=r.matter.add.sprite(t,i,\"dirt\",s,{isStatic:!0,label:\"dirt\"});return o.setPosition(t,i),o.setStatic(!0),o.setCollisionCategory(256),o.setBounce(0),o.setFriction(1),o.setFrictionStatic(1),n.sprite=o,n}return s(t,e),t}(i(6).default);t.default=n},function(e,t,i){\"use strict\";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(e){function t(t,i,r,s){var n=e.call(this)||this,o=r.matter.bodies.rectangle(t,i,50,50,{inertia:1/0,label:\"steel\"}),a=r.matter.add.sprite(t,i,\"steel\",s,{label:\"steel\"});return a.setExistingBody(o),a.setCollisionCategory(256),a.setPosition(t,i),a.setBounce(0),n.sprite=a,n}return s(t,e),t}(i(6).default);t.default=n},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.connectorBlocks=t.jointBlocks=t.initAnims=void 0;var r=i(5),s=i(51);function n(e,t,i,r,s,n,o){e.matter.add.joint(n,o,0,1,{pointA:{x:t,y:i},pointB:{x:r,y:s},angularStiffness:1,stiffness:1,damping:1})}t.initAnims=function(e){e.anims.create({key:\"squareFire\",frames:e.anims.generateFrameNumbers(\"squareFire\",{start:0,end:4}),frameRate:60,repeat:-1}),e.anims.create({key:\"fireball\",frames:e.anims.generateFrameNumbers(\"fireball\",{start:0,end:1}),frameRate:10,repeat:-1}),e.anims.create({key:\"fireDisappear\",frames:e.anims.generateFrameNumbers(\"fireDisappear\",{start:0,end:39}),frameRate:60}),e.anims.create({key:\"lizard\",frames:e.anims.generateFrameNumbers(\"lizard\",{start:0,end:29}),frameRate:60,repeat:-1}),e.anims.create({key:\"left\",frames:e.anims.generateFrameNumbers(\"player\",{start:0,end:6}),frameRate:10,repeat:-1}),e.anims.create({key:\"turnLeft\",frames:[{key:\"player\",frame:6}]}),e.anims.create({key:\"shootLeft\",frames:e.anims.generateFrameNumbers(\"shoot\",{start:0,end:4}),frameRate:10}),e.anims.create({key:\"shootRight\",frames:e.anims.generateFrameNumbers(\"shoot\",{start:6,end:9}),frameRate:10}),e.anims.create({key:\"jumpLeft\",frames:[{key:\"jump\",frame:4}],frameRate:30}),e.anims.create({key:\"jumpRight\",frames:[{key:\"jump\",frame:5}],frameRate:30}),e.anims.create({key:\"fallLeft\",frames:e.anims.generateFrameNumbers(\"jump\",{start:3,end:0}),frameRate:30}),e.anims.create({key:\"fallRight\",frames:e.anims.generateFrameNumbers(\"jump\",{start:4,end:7}),frameRate:30}),e.anims.create({key:\"turnRight\",frames:[{key:\"player\",frame:7}]}),e.anims.create({key:\"right\",frames:e.anims.generateFrameNumbers(\"player\",{start:7,end:12}),frameRate:10,repeat:-1}),e.anims.create({key:\"spider\",frames:e.anims.generateFrameNumbers(\"spider\",{start:0,end:5}),frameRate:20,repeat:-1}),e.anims.create({key:\"spiderArmored\",frames:e.anims.generateFrameNumbers(\"spiderArmored\",{start:0,end:5}),frameRate:20,repeat:-1}),e.anims.create({key:\"explosion\",frames:e.anims.generateFrameNumbers(\"explosion\",{start:0,end:8}),frameRate:30,hideOnComplete:!0})};t.jointBlocks=function(e,t,i){var s=new Set,o=[];i.steel.forEach((function(e){return o.push(e)})),i.crate.forEach((function(e){return o.push(e)})),i.lava.forEach((function(e){return o.push(e)})),o.forEach((function(i){s.add(t[i.x+\",\"+i.y]);var o=t[i.x+\",\"+i.y].sprite,a=r.indexes[i.frame].split(\"\"),l=i.x+\",\"+(i.y-50),c=i.x+50+\",\"+i.y,d=i.x+\",\"+(i.y+50),u=i.x-50+\",\"+i.y,p=i.x+\",\"+(i.y-25),f=i.x+25+\",\"+i.y,h=i.x+\",\"+(i.y+25),y=i.x-25+\",\"+i.y;if(1==a[1]&&!s.has(p)){var g=t[l];n(e,0,-25,0,25,o.body,g.sprite.body),s.add(p)}if(1==a[3]&&!s.has(f)){var m=t[c];n(e,25,0,-25,0,o.body,m.sprite.body),s.add(f)}if(1==a[5]&&!s.has(h)){var v=t[d];n(e,0,25,0,-25,o.body,v.sprite.body),s.add(h)}if(1==a[7]&&!s.has(y)){var b=t[u];n(e,-25,0,25,0,o.body,b.sprite.body),s.add(y)}}))};t.connectorBlocks=function(e,t,i){i.connector.forEach((function(i){var r=parseInt(i.substring(0,i.indexOf(\",\"))),n=parseInt(i.substring(i.indexOf(\",\")+1));if(r%50==0){var o=t[r-25+\",\"+n],a=t[r+25+\",\"+n];new s.default(o,a,e),o.right=a,a.left=o}else{var l=t[r+\",\"+(n-25)],c=t[r+\",\"+(n+25)];new s.default(l,c,e),c.up=l,l.down=c}}))}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=i(11),s=function(){function e(e,t,i){for(var s=e.sprite.x,n=t.sprite.x,o=e.sprite.y,a=t.sprite.y,l=(Math.max(n,s),Math.min(n,s),Math.max(a,o),Math.min(a,o),i.matter.add.image(n+(s-n)/2,a+(o-a)/2,\"connector\",null,{isSensor:!0,ignoreGravity:!0})),c=[],d=n-s==0,u=a-o==0,p=0;p<1;p+=4)c.push(i.matter.add.joint(e.sprite.body,t.sprite.body,0,1,{pointA:{x:d?p:(n-s)/2,y:u?p:(a-o)/2},pointB:{x:d?p:(s-n)/2,y:u?p:(o-a)/2},angularStiffness:1,stiffness:1}));this.constraints=c,n-s==0&&(l.angle=90),this.connectorPin=i.matter.add.joint(e.sprite.body,l.body,0,1,{pointA:{x:0,y:0},pointB:{x:(s-n)/2,y:(o-a)/2},angularStiffness:1,stiffness:1}),this.sprite=l,e instanceof r.default&&e.connectors.add(this),t instanceof r.default&&t.connectors.add(this)}return e.prototype.destroy=function(e){this.sprite.destroy(),this.constraints.forEach((function(t){e.matter.world.removeConstraint(t)})),e.matter.world.removeConstraint(this.connectorPin)},e}();t.default=s},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.createCollisions=void 0;var r=new Set([\"lizard\",\"spider\",\"fire\",\"exit\"]);function s(e){return e.includes(\"spider\")||e.includes(\"lizard\")}function n(e){return e.includes(\"crate\")||e.includes(\"steel\")||e.includes(\"lava\")||e.includes(\"dirt\")}t.createCollisions=function(e){e.matter.world.on(\"collisionstart\",(function(t){for(var i=t.pairs,o=function(t){var o=i[t].bodyA,a=i[t].bodyB,l=o.label,c=a.label;if(c.includes(\"lizard\")&&\"fire\"===l||l.includes(\"lizard\")&&\"fire\"===c){e.fire.destroy(),e.fireActive=!1;var d=l.includes(\"lizard\")?l:c;e.lizards[d].ignite(e)}if(\"exit\"==l&&\"player\"==c||\"exit\"==c&&\"player\"==l){if(\"false\"==localStorage.getItem(\"useleveleditor\")){var u=parseInt(localStorage.getItem(\"level\"))+1;localStorage.setItem(\"level\",u.toString())}e.scene.restart()}if(\"fire\"==l&&c.includes(\"bomb\")||\"fire\"==c&&l.includes(\"bomb\")){var p=l.includes(\"bomb\")?l:c;e.bombs[p].makeExit(e),e.fire.destroy(),e.fireActive=!1}if((\"fire\"==l&&n(c)||\"fire\"==c&&n(l))&&(e.fire.destroy(),e.fireActive=!1),l.includes(\"lizard\")&&c.includes(\"bomb\")||c.includes(\"lizard\")&&l.includes(\"bomb\")){p=l.includes(\"bomb\")?l:c,d=l.includes(\"lizard\")?l:c;e.lizards[d].onFire&&e.bombs[p].makeExit(e)}if((l.includes(\"lizard\")&&\"player\"==c||c.includes(\"lizard\")&&\"player\"==l)&&e.scene.restart(),(l.includes(\"spider\")&&\"player\"==c||c.includes(\"spider\")&&\"player\"==l)&&e.scene.restart(),l.includes(\"crate\")&&\"player\"==c||c.includes(\"crate\")&&\"player\"==l){var f=l.includes(\"crate\")?l:c;e.crates[f].onFire&&e.scene.restart()}if(l.includes(\"crate\")&&c.includes(\"player\")||c.includes(\"crate\")&&l.includes(\"player\")){f=l.includes(\"crate\")?l:c;e.crates[f].onFire&&e.scene.restart()}if(n(l)&&c.includes(\"bomb\")&&a.isSensor||n(c)&&l.includes(\"bomb\")&&o.isSensor){p=l.includes(\"bomb\")?l:c;e.bombs[p].makeExit(e)}((\"playerRight\"==l&&n(c)||\"playerRight\"==c&&n(l))&&(e.player.hittingRight=!0),(\"playerLeft\"==l&&n(c)||\"playerLeft\"==c&&n(l))&&(e.player.hittingLeft=!0),\"playerTop\"==l||\"playerTop\"==c)&&(\"exit\"!=(g=\"playerTop\"!==l?o:a).label&&(g.velocity.y>0&&0==e.player.sprite.body.velocity.y?e.scene.restart():e.player.sprite.setVelocityY(0)));if(c.includes(\"spider\")&&\"fire\"===l||l.includes(\"spider\")&&\"fire\"===c){e.fire.destroy(),e.fireActive=!1;var h=c.includes(\"spider\")?c:l;e.spiders[h].hitFire()}if(c.includes(\"lizard\")&&l.includes(\"crate\")||l.includes(\"lizard\")&&c.includes(\"crate\")){f=l.includes(\"crate\")?l:c,d=l.includes(\"crate\")?c:l;e.lizards[d].onFire&&e.burnQueue.add(e.crates[f].owner),e.crates[f].onFire&&e.lizards[d].ignite(e)}if(c.includes(\"spider\")&&l.includes(\"crate\")||l.includes(\"spider\")&&c.includes(\"crate\")){f=l.includes(\"crate\")?l:c,h=l.includes(\"crate\")?c:l;e.crates[f].onFire&&e.spiders[h].destroy()}if(i[t].isSensor){var y=void 0,g=void 0;o.isSensor?(y=o,g=a):a.isSensor&&(y=a,g=a),\"groundSensor\"===y.label&&\"fire\"!=g.label&&n(g.label)&&(e.player.touchingGround=!0)}if(\"fire\"===l&&c.includes(\"crate\")&&(e.fire.destroy(),e.fireActive=!1,e.burnQueue.add(e.crates[c].owner)),\"fire\"===c&&l.includes(\"crate\")&&e.burnQueue.add(e.crates[l].owner),\"fire\"===l&&c.includes(\"lava\")||\"fire\"===c&&l.includes(\"lava\")){var m=l.includes(\"lava\")?l:c;e.lavas[m].ignite(e,e.tiles,e.xTiles,e.yTiles),e.fire.destroy(),e.fireActive=!1}if(c.includes(\"spider\")&&l.includes(\"lizard\")||l.includes(c.includes(\"lizard)\"))){h=c.includes(\"spider\")?c:l,d=c.includes(\"lizard\")?c:l;e.lizards[d].onFire&&e.lizards[d].sprite.active&&e.spiders[h].destroy()}if(n(l)&&c.includes(\"lizTop\")||n(c)&&l.includes(\"lizTop\")){var v=l.includes(\"lizTop\")?l:c,b=v.substring(v.indexOf(\",\")+1);e.lizards[\"lizard\"+b].destroy()}if(n(l)&&c.includes(\"spiTop\")||n(c)&&l.includes(\"spiTop\")){var S=l.includes(\"spiTop\")?l:c,w=S.substring(S.indexOf(\",\")+1);e.spiders[\"spider\"+w].destroy()}if(o.isSensor&&0==o.ignoreGravity&&s(l)||a.isSensor&&0==a.ignoreGravity&&s(c)){var x=o.isSensor?o:a,_=o.isSensor?a:o,O=!0;r.forEach((function(e){_.label.includes(e)&&(O=!1)})),O&&(x.label.includes(\"lizard\")?e.lizards[x.label].flip():e.spiders[x.label].flip())}},a=0;a<i.length;a++)o(a)})),e.matter.world.on(\"collisionend\",(function(t){for(var i=t.pairs,r=0;r<i.length;r++){var s=i[r].bodyA,n=i[r].bodyB,o=s.label,a=n.label;\"playerRight\"!=o&&\"playerRight\"!=a||(e.player.hittingRight=!1),\"playerLeft\"!=o&&\"playerLeft\"!=a||(e.player.hittingLeft=!1)}})),e.matter.world.on(\"collisionactive\",(function(t){for(var i=t.pairs,r=0;r<i.length;r++){var s=i[r].bodyA,o=i[r].bodyB,a=s.label,l=o.label;if((\"playerRight\"==a&&n(l)||\"playerRight\"==l&&n(l))&&(e.player.hittingRight=!0),(\"playerLeft\"==a&&n(l)||\"playerLeft\"==l&&n(l))&&(e.player.hittingLeft=!0),a.includes(\"lizard\")&&l.includes(\"bomb\")||l.includes(\"lizard\")&&a.includes(\"bomb\")){var c=a.includes(\"bomb\")?a:l,d=a.includes(\"lizard\")?a:l;e.lizards[d].onFire&&e.bombs[c].makeExit(e)}if(a.includes(\"crate\")&&l.includes(\"bomb\")||l.includes(\"crate\")&&a.includes(\"bomb\")){c=a.includes(\"bomb\")?a:l;var u=a.includes(\"crate\")?a:l;e.crates[u].onFire&&e.bombs[c].makeExit(e)}if(\"playerTop\"==a||\"playerTop\"==l)(\"playerTop\"!==a?s:o).velocity.y>=0&&0==e.player.sprite.body.velocity.y?e.scene.restart():e.player.sprite.setVelocityY(0);if(l.includes(\"spider\")&&a.includes(\"lizard\")||a.includes(l.includes(\"lizard)\"))){var p=l.includes(\"spider\")?l:a;d=l.includes(\"lizard\")?l:a;e.lizards[d].onFire&&e.lizards[d].sprite.active&&e.spiders[p].destroy()}if(a.includes(\"crate\")&&l.includes(\"player\")||l.includes(\"crate\")&&a.includes(\"player\")){u=a.includes(\"crate\")?a:l;e.crates[u].onFire&&e.scene.restart()}if(a.includes(\"rightEdgeL\")||l.includes(\"rightEdgeL\")){d=a.includes(\"rightEdgeL\")?a:l;var f=parseInt(d.substring(d.indexOf(\",\")+1));e.lizards[\"lizard\"+f].rightEdge=!0}if(a.includes(\"leftEdgeL\")||l.includes(\"leftEdgeL\")){d=a.includes(\"leftEdgeL\")?a:l,f=parseInt(d.substring(d.indexOf(\",\")+1));e.lizards[\"lizard\"+f].leftEdge=!0}if(a.includes(\"rightEdgeS\")||l.includes(\"rightEdgeS\")){p=a.includes(\"rightEdgeS\")?a:l,f=parseInt(p.substring(p.indexOf(\",\")+1));e.spiders[\"spider\"+f].rightEdge=!0}if(a.includes(\"lizard\")&&l.includes(\"lizard\")&&(e.lizards[a].onFire&&e.lizards[l].ignite(e),e.lizards[l].onFire&&e.lizards[a].ignite(e)),a.includes(\"leftEdgeS\")||l.includes(\"leftEdgeS\")){p=a.includes(\"leftEdgeS\")?a:l,f=parseInt(p.substring(p.indexOf(\",\")+1));e.spiders[\"spider\"+f].leftEdge=!0}}for(var h=0,y=Object.entries(e.lizards);h<y.length;h++){var g=y[h];g[0];0==(b=g[1]).rightEdge?(b.flip(),b.rightEdge=!0):b.rightEdge=!1,0==b.leftEdge?(b.flip(),b.leftEdge=!0):b.leftEdge=!1}for(var m=0,v=Object.entries(e.spiders);m<v.length;m++){var b,S=v[m];S[0];0==(b=S[1]).rightEdge?(b.flip(),b.rightEdge=!0):b.rightEdge=!1,0==b.leftEdge?(b.flip(),b.leftEdge=!0):b.leftEdge=!1}}))}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=i(12),s=function(){function e(e,t,i,r){var s=r.matter.bodies.rectangle(0,0,35,35,{label:\"bomb\"+i,inertia:1/0}),n=r.matter.bodies.rectangle(0,-17,10,2,{isSensor:!0,label:\"bomb\"+i}),o=r.matter.body.create({parts:[s,n],inertia:1/0,label:\"bomb\"+i,render:{sprite:{xOffset:.5,yOffset:.5}}});this.sprite=r.matter.add.sprite(e,t,\"bomb\",null,{label:\"bomb\"+i}),this.sprite.setExistingBody(o),this.sprite.setPosition(e,t),this.sprite.setCollisionCategory(1048576),this.sprite.setCollidesWith(4352),this.sprite.setFixedRotation(),this.sprite.setBounce(0)}return e.prototype.makeExit=function(e){this.sprite.active&&(new r.default(this.sprite.x,this.sprite.y,e),e.add.sprite(this.sprite.x,this.sprite.y,\"explosion\").anims.play(\"explosion\"),this.sprite.destroy())},e}();t.default=s},function(e,t,i){\"use strict\";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0}),t.LevelEditor=void 0;var n,o,a,l,c=i(0),d=i(55),u=i(56),p={active:!1,visible:!1,key:\"LevelEditor\"},f=i(57),h=i(58),y=function(e){function t(){var t=e.call(this,p)||this;return t.speed=200,t.selected=\"crate\",t.onButton=!1,t.width=24,t.height=12,t}return s(t,e),t.prototype.create=function(){var e=this,t=0,i=0,r=!1;a=this.input.activePointer;var s=\"true\"==localStorage.getItem(\"upload\")?JSON.parse(localStorage.getItem(\"leveleditorlevel\")):this.cache.json.get(\"leveleditorlevel\");s=null==s.width?JSON.parse(s):s,this.width=s.width,this.height=s.height;var p=50*this.width,f=50*this.height;this.add.tileSprite(p/2,f/2,p,f,\"backgroundDirt\");n=this.input.keyboard.createCursorKeys(),this.matter.world.setBounds(0,0,p,f,32,!0,!0,!1,!0),this.cameras.main.setBounds(0,0,p,f);var y={camera:this.cameras.main,left:n.left,right:n.right,up:n.up,down:n.down,acceleration:.3,drag:5e-4,maxSpeed:.3},g={scene:this,cols:p/50,rows:f/50};l=new d.default(g),o=new Phaser.Cameras.Controls.SmoothedKeyControl(y);for(var m=[\"Start Level\",\"Download\",\"Upload\",\"Clump\",\"Connect\",\"Exit\",\"Bomb\",\"Clear\",\"Crate\",\"Lava\",\"Dirt\",\"Steel\",\"Lizard\",\"Spider\",\"Player\",\"Armor Spider\"],v=[\"start\",\"download\",\"upload\",\"clump\",\"connector\",\"exit\",\"bomb\",\"clear\",\"crate\",\"lava\",\"dirt\",\"steel\",\"lizard\",\"spider\",\"player\",\"spiderArmored\"],b=[],S=0;S<m.length;S++)S<5?b.push(new u.default(700,20+30*S,m[S],\"#fff\",v[S],this)):b.push(new u.default(700,40+30*S,m[S],\"#fff\",v[S],this));b.push(new h.default(700,40+30*m.length,\"width\",this)),b.push(new h.default(700,40+30*(m.length+1),\"height\",this)),this.buttons=b,this.input.on(\"pointerdown\",(function(e){t=e.worldX,i=e.worldY,\"clump\"!=w.selected&&\"connector\"!=w.selected||(r=!0)})),this.graphics=this.add.graphics(),this.graphics.depth=2;var w=this;this.input.on(\"pointerup\",(function(){r=!1,w.graphics.clear();var e=l.getRowOrCol(Math.min(t,a.worldX)),s=l.getRowOrCol(Math.min(i,a.worldY)),n=l.getRowOrCol(Math.max(t,a.worldX)),o=l.getRowOrCol(Math.max(i,a.worldY));\"clump\"==w.selected?l.clumpBox(e,s,n,o):\"connector\"==w.selected&&l.connect(e,s,n,o,w)})),this.input.on(\"pointermove\",(function(e){if(r&&!1===e.noButtonDown()&&(\"clump\"==w.selected||\"connector\"==w.selected)){var s=w.graphics;s.clear(),s.fillStyle(255,.4),s.lineStyle(2,255,.75),s.fillRect(t,i,e.worldX-t,e.worldY-i),s.strokeRect(t,i,e.worldX-t,e.worldY-i)}})),l.show(),l.placeAt(s.player[0].x,s.player[0].y,\"player\",this),s.dirt.forEach((function(t){l.placeAtPreset(t.x,t.y,\"dirt\",t.frame,e)})),s.steel.forEach((function(t){l.placeAtPreset(t.x,t.y,\"steel\",t.frame,e)})),s.crate.forEach((function(t){l.placeAtPreset(t.x,t.y,\"crate\",t.frame,e)})),s.lava.forEach((function(t){l.placeAtPreset(t.x,t.y,\"lava\",t.frame,e)})),s.lizard.forEach((function(t){l.placeAtPreset(t.x,t.y,\"lizard\",\"0\",e)})),s.spider.forEach((function(t){l.placeAtPreset(t.x,t.y,\"spider\",\"0\",e)})),s.exit.forEach((function(t){l.placeAtPreset(t.x,t.y,\"exit\",\"0\",e)})),s.bomb.forEach((function(t){l.placeAtPreset(t.x,t.y,\"bomb\",\"0\",e)})),s.connector.forEach((function(e){var t=parseInt(e.substring(0,e.indexOf(\",\"))),i=parseInt(e.substring(e.indexOf(\",\")+1));l.connectors[e]=w.add.image(t,i,\"connector\"),i%50==0&&(l.connectors[e].angle=90)})),l.placeAt(s.player[0].x,s.player[0].y,\"player\",this),new c.MenuButton(this,10,10,\"Back to Menu\",(function(){e.scene.start(\"MainMenu\")}))},t.prototype.generateJson=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1);for(var i={width:this.width,height:this.height+1,player:[],lizard:[],spider:[],spiderArmored:[],dirt:[],lava:[],crate:[],steel:[],exit:[],bomb:[],connector:[]},r=l.grid,s=0;s<r.length;s++)for(var n=0;n<r[0].length;n++)if(r[s][n]){var o=r[s][n];(s<this.width&&n<this.height||\"player\"==o.name)&&i[o.name].push({x:o.x,y:o.y,frame:o.frame.name})}for(var a=0,c=Object.entries(l.connectors);a<c.length;a++){var d=c[a],u=d[0];d[1];i.connector.push(u)}var p=JSON.stringify(i);if(e)localStorage.setItem(\"leveleditorlevel\",p),localStorage.setItem(\"useleveleditor\",\"true\"),this.scene.start(\"Game\");else if(t)localStorage.setItem(\"upload\",\"true\"),localStorage.setItem(\"leveleditorlevel\",p),this.scene.restart();else{var h=new Blob([JSON.stringify(i,null,2)],{type:\"application/json\"});f(h,\"level.json\")}},t.prototype.update=function(e,t){o.update(t),a.isDown&&(\"clump\"==this.selected||\"connector\"==this.selected||this.onButton||l.placeAt(a.worldX,a.worldY,this.selected,this))},t}(Phaser.Scene);t.LevelEditor=y},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=i(5),s=new Set([\"dirt\",\"lava\",\"crate\",\"steel\"]);var n=function(){function e(e){if(this.counter=0,e.scene){e.rows||console.log(\"no rows given wee woo\"),e.cols||console.log(\"no columns given wee woo\"),this.h=50*e.rows,this.w=50*e.cols,this.rows=e.rows,this.cols=e.cols,this.scene=e.scene,this.grid=new Array(this.cols),this.connectors={},this.selected=\"lavaTile\";for(var t=0;t<this.cols;t++)this.grid[t]=new Array(this.rows);this.playerTile=null}else console.log(\"missing scene!\")}return e.prototype.show=function(e){void 0===e&&(e=.7),this.graphics=this.scene.add.graphics(),this.graphics.lineStyle(1,16711680,e);for(var t=0;t<this.w;t+=50)this.graphics.moveTo(t,0),this.graphics.lineTo(t,this.h);for(t=0;t<this.h;t+=50)this.graphics.moveTo(0,t),this.graphics.lineTo(this.w,t);this.graphics.strokePath()},e.prototype.clearConnector=function(e,t){var i=this;this.neighbors4(e,t).forEach((function(r){var s=i.unpack(r)[0],n=i.unpack(r)[1],o=i.getPixel(e),a=i.getPixel(t),l=o+25*(s-e)+\",\"+(a+25*(n-t));l in i.connectors&&(i.connectors[l].destroy(),delete i.connectors[l])}))},e.prototype.clearTile=function(e,t,i){var r=this;if(this.grid[e][t]){var n=this.grid[e][t].name,o=this.grid[e][t].frame.name;if(\"player\"==n)return;this.grid[e][t].destroy(),this.grid[e][t]=null,s.has(n)&&0!=o&&this.neighbors(e,t).forEach((function(e){var t=r.unpack(e)[0],i=r.unpack(e)[1];r.grid[t][i]&&0!=r.grid[t][i].frame.name&&r.clumpBox(t,i,t,i)}))}this.grid[e][t]=null,this.clearConnector(e,t)},e.prototype.placeAtPreset=function(e,t,i,r,s){this.placeAt(e,t,i,s);var n=Math.floor(e/50),o=Math.floor(t/50);this.grid[n][o].setFrame(r)},e.prototype.placeAt=function(e,t,i,r){var s=Math.floor(e/50),n=Math.floor(t/50),o=50*s+25,a=50*n+25;if(\"clear\"!=i){if(!this.grid[s][n]||!this.playerTile||this.playerTile[0]!=s||this.playerTile[1]!=n){if(this.clearTile(s,n,r),\"player\"==i){if(this.playerTile){var l=this.playerTile,c=l[0],d=l[1];this.grid[c][d].destroy(),this.grid[c][d]=null}this.playerTile=[s,n]}var u=r.add.image(o,a,i);(\"lizard\"==i||i.includes(\"spider\"))&&(u.scaleX=.7,i.includes(\"spider\")&&(u.scaleY=.9)),u.name=i,this.grid[s][n]=u,u.x=o,u.y=a}}else this.clearTile(s,n,r)},e.prototype.getRowOrCol=function(e){return Math.floor(e/50)},e.prototype.getPixel=function(e){return 50*e+25},e.prototype.neighbors=function(e,t){return[e-1+\",\"+(t-1),e+\",\"+(t-1),e+1+\",\"+(t-1),e+1+\",\"+t,e+1+\",\"+(t+1),e+\",\"+(t+1),e-1+\",\"+(t+1),e-1+\",\"+t]},e.prototype.neighbors4=function(e,t){return[e+\",\"+(t-1),e+1+\",\"+t,e+\",\"+(t+1),e-1+\",\"+t]},e.prototype.unpack=function(e){var t=e.indexOf(\",\");return[parseInt(e.substring(0,t)),parseInt(e.substring(t+1))]},e.prototype.clumpBox=function(e,t,i,r){for(var s=this,n=new Set,o=new Set,a=e;a<=i;a++)for(var l=t;l<=r;l++)this.grid[a][l]&&(n.add(a+\",\"+l),o.add(a+\",\"+l),this.neighbors(a,l).forEach((function(e){var t=s.unpack(e),i=t[0],r=t[1];i>0&&i<s.cols&&r>0&&r<s.rows&&s.grid[i][r]&&0!=s.grid[i][r].frame.name&&o.add(e)})));this.clump(n,o)},e.prototype.clump=function(e,t){var i=this;e.forEach((function(e){var n=i.unpack(e),o=n[0],a=n[1];if(i.clearConnector(o,a),s.has(i.grid[o][a].name)){for(var l=i.neighbors(o,a),c=[1,1,1,1,1,1,1,1],d=0,u=0;u<l.length;u++){var p=l[u],f=i.unpack(p)[0],h=i.unpack(p)[1];t.has(p)&&i.grid[f][h].name==i.grid[o][a].name||(u%2==0?c[d]=0:(c[d]=0,c[d+1]=0,d+2>7?c[0]=0:c[d+2]=0)),u%2==1&&(d+=2)}i.grid[o][a].setFrame(r.tiles[c.join(\"\")])}}))},e.prototype.connect=function(e,t,i,n,o){var a=this;if(!(i>=this.grid.length||n>this.grid[0].length)){for(var l=new Set,c=(new Set,e);c<=i;c++)for(var d=t;d<=n;d++)this.grid[c][d]&&l.add(c+\",\"+d);l.forEach((function(e){var t,i=a.unpack(e),n=i[0],c=i[1];if(s.has(a.grid[n][c].name))for(var d=a.neighbors4(n,c),u=r.indexes[parseInt(a.grid[n][c].frame.name)].split(\"\"),p=0;p<d.length;p++){var f=d[p],h=a.unpack(f)[0],y=a.unpack(f)[1],g=!1,m=!1;if(l.has(f)&&((t=a.grid[h][y].name).includes(\"crate\")||t.includes(\"steel\")||t.includes(\"lava\")||t.includes(\"dirt\"))){var v=r.indexes[parseInt(a.grid[h][y].frame.name)],b=a.getPixel(n),S=a.getPixel(c);if(h>n?\"0\"==v[7]&&\"0\"==u[3]&&(g=!0):h<n?\"0\"==v[3]&&\"0\"==u[7]&&(g=!0):y>c?\"0\"==v[1]&&\"0\"==u[5]&&(g=!0,m=!0):y<c&&\"0\"==v[5]&&\"0\"==u[1]&&(g=!0,m=!0),g){var w=b+25*(h-n),x=S+25*(y-c),_=w+\",\"+x;_ in a.connectors||(a.connectors[_]=o.add.image(w,x,\"connector\"),m&&(a.connectors[_].angle=90))}}}}))}},e}();t.default=n},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=i(0),s=function(){function e(e,t,i,s,n,o){var a=this;var l=document.getElementById(\"levelLoader\");l.addEventListener(\"change\",(function(e){localStorage.setItem(\"upload\",\"true\");var t=new FileReader;t.readAsText(e.target.files[0]),t.onload=function(e){localStorage.setItem(\"leveleditorlevel\",JSON.parse(JSON.stringify(e.target.result))),o.scene.restart()}}),!1);var c=new r.MenuButton(o,e,t,i,(function(){\"start\"==n?o.generateJson(!0):\"download\"==n?o.generateJson(!1):\"upload\"==n?l.click():o.selected=n,o.buttons.forEach((function(e){e.reset()})),a.button.pressed=!0,a.button.enterMenuButtonActiveState()}),75,10,10);c.on(\"pointerover\",(function(){o.onButton=!0})),c.on(\"pointerout\",(function(){o.onButton=!1})),c.setDepth(1),this.button=c}return e.prototype.reset=function(){this.button.pressed=!1,this.button.enterMenuButtonRestState()},e}();t.default=s},,function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=i(0),s=function(){function e(e,t,i,s){var n=this;this.upPressed=!1,this.downPressed=!1,document.getElementById(\"levelLoader\").addEventListener(\"change\",(function(e){localStorage.setItem(\"upload\",\"true\");var t=new FileReader;t.readAsText(e.target.files[0]),t.onload=function(e){localStorage.setItem(\"leveleditorlevel\",JSON.stringify(e.target.result)),s.scene.restart()}}),!1);var o=new r.MenuButton(s,e+20,t,i+\":\"+s[i],(function(){s.generateJson(!1,!0)}),50,10,10),a=new r.MenuButton(s,e,t,\"+\",(function(){s[i]+=1,o.label.text=i+\":\"+s[i],s.buttons.forEach((function(e){e.reset()})),a.pressed=!0,a.enterMenuButtonActiveState()}),20,20,10,!1),l=new r.MenuButton(s,e,t+10,\"-\",(function(){s[i]-=1,o.label.text=i+\":\"+s[i],s.buttons.forEach((function(e){e.reset()})),l.pressed=!0,l.enterMenuButtonActiveState()}),20,20,10,!1);o.on(\"pointerover\",(function(){s.onButton=!0})),o.on(\"pointerout\",(function(){s.onButton=!1})),a.on(\"pointerover\",(function(){s.onButton=!0})),a.on(\"pointerout\",(function(){s.onButton=!1})),a.on(\"pointerup\",(function(){a.enterMenuButtonRestState(),n.upPressed=!1})),l.on(\"pointerover\",(function(){s.onButton=!0})),l.on(\"pointerout\",(function(){s.onButton=!1})),l.on(\"pointerup\",(function(){l.enterMenuButtonRestState(),n.downPressed=!1})),a.setDepth(1),l.setDepth(1),o.setDepth(1),this.button=o,this.up=a,this.down=l}return e.prototype.reset=function(){this.button.pressed=!1,this.button.enterMenuButtonRestState(),this.up.pressed=!1,this.up.enterMenuButtonRestState(),this.down.pressed=!1,this.down.enterMenuButtonRestState()},e}();t.default=s},function(e,t,i){\"use strict\";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0}),t.LevelSelect=void 0;var n=i(0),o={active:!1,visible:!1,key:\"LevelSelect\"},a=function(e){function t(){return e.call(this,o)||this}return s(t,e),t.prototype.create=function(){var e=this;this.add.text(100,50,\"Level Select\",{color:\"#FFFFFF\"}).setFontSize(24),localStorage.setItem(\"useleveleditor\",\"false\");for(var t=1,i=0;i<4;i++)for(var r=function(r){var o=t.toString();new n.MenuButton(s,100+150*r,100+100*i,t.toString(),(function(){localStorage.setItem(\"useleveleditor\",\"false\"),localStorage.setItem(\"level\",o),e.scene.start(\"Game\")}),20,20),t++},s=this,o=0;o<5;o++)r(o)},t}(Phaser.Scene);t.LevelSelect=a}]);","extractedComments":[]}